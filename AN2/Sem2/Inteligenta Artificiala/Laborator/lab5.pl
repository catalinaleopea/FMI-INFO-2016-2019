%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Setul II de exercitii
% facultati(nume,idFacultate).
facultati(fizica,1).
facultati(chimie,2).
facultati(medicina,3).
facultati(informatica,4).


% studenti(nume,prenume, idFacultate, idStudent).
studenti(ion, alexandru, 1,1).
studenti(andrei, maria, 1,2).
studenti(dumitru, gheorghe, 1,3).
studenti(badea, alin, 1,4).
studenti(arnautu, alexandra, 1,5).
studenti(baciu, ioana, 1,6).

studenti(anghel, mihai, 2,1).
studenti(dumitrache, dorin, 2,2).
studenti(badulescu, marian, 2,3).
studenti(geaboc, maria, 2,4).
studenti(scacioc, mihaela, 2,5).
studenti(teaha, anda, 2,6).

studenti(oeru, maria, 3,1).
studenti(fer, andrei, 3,2).
studenti(zamfir, bogdan, 3,3).
studenti(macafi, alin, 3,4).
studenti(haba, corina, 3,5).
studenti(ogor, claudiu, 3,6).

studenti(tifon, paul, 4,1).
studenti(hancu, dan, 4,2).
studenti(farca, emil, 4,3).
studenti(oghina, elena, 4,4).
studenti(tacea, florin, 4,5).
studenti(jaba, alina, 4,6).


% catalog(materie, idFacultate, nota, idStudent)
catalog(ecuatiileFiziciiMatematice, 1, 3, 1).
catalog(electricitateSiMagnetism, 1, 5, 1).
catalog(analizaRealaSiComplexa, 1, 6, 1).
catalog(materie4, 1, 6, 1).
catalog(materie5, 1, 7, 1).

catalog(ecuatiileFiziciiMatematice, 1, 6, 2).
catalog(electricitateSiMagnetism, 1, 4, 2).
catalog(analizaRealaSiComplexa, 1, 7, 2).
catalog(prelucrareaDatelorFizice, 1, 7, 2).
catalog(fizicaMoleculara, 1, 8, 2).

catalog(ecuatiileFiziciiMatematice, 1, 4, 3).
catalog(electricitateSiMagnetism, 1, 7, 3).
catalog(analizaRealaSiComplexa, 1, 8, 3).
catalog(prelucrareaDatelorFizice, 1, 8, 3).
catalog(fizicaMoleculara, 1, 9, 3).

catalog(ecuatiileFiziciiMatematice, 1, 4, 4).
catalog(electricitateSiMagnetism, 1, 6, 4).
catalog(analizaRealaSiComplexa, 1, 7, 4).
catalog(prelucrareaDatelorFizice, 1, 5, 4).
catalog(fizicaMoleculara, 1, 7, 4).

catalog(ecuatiileFiziciiMatematice, 1, 7, 5).
catalog(electricitateSiMagnetism, 1, 8, 5).
catalog(analizaRealaSiComplexa, 1, 6, 5).
catalog(prelucrareaDatelorFizice, 1, 7, 5).
catalog(fizicaMoleculara, 1, 8, 5).

catalog(ecuatiileFiziciiMatematice, 1, 8, 6).
catalog(electricitateSiMagnetism, 1, 6, 6).
catalog(analizaRealaSiComplexa, 1, 8, 6).
catalog(prelucrareaDatelorFizice, 1, 7, 6).
catalog(fizicaMoleculara, 1, 8, 6).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
catalog(cineticaChimica, 2, 9, 1).
catalog(radioactivitateaCompusilorOrganici, 2, 8, 1).
catalog(chimiaNemetalelor, 2, 7, 1).
catalog(fizicaCuantica, 2, 5, 1).
catalog(termodinamicaChimica, 2, 9, 1).

catalog(cineticaChimica, 2, 8, 2).
catalog(radioactivitateaCompusilorOrganici, 2, 5, 2).
catalog(chimiaNemetalelor, 2, 7, 2).
catalog(fizicaCuantica, 2, 7, 2).
catalog(termodinamicaChimica, 2, 6, 2).

catalog(cineticaChimica, 2, 4, 3).
catalog(radioactivitateaCompusilorOrganici, 2, 6, 3).
catalog(chimiaNemetalelor, 2, 5, 3).
catalog(fizicaCuantica, 2, 4, 3).
catalog(termodinamicaChimica, 2, 2, 3).

catalog(cineticaChimica, 2, 9, 4).
catalog(radioactivitateaCompusilorOrganici, 2, 10, 4).
catalog(chimiaNemetalelor, 2, 10, 4).
catalog(fizicaCuantica, 2, 10, 4).
catalog(termodinamicaChimica, 2, 10, 4).

catalog(cineticaChimica, 2, 9, 5).
catalog(radioactivitateaCompusilorOrganici, 2, 8, 5).
catalog(chimiaNemetalelor, 2, 7, 5).
catalog(fizicaCuantica, 2, 6, 5).
catalog(termodinamicaChimica, 2, 4, 5).

catalog(cineticaChimica, 2, 8, 6).
catalog(radioactivitateaCompusilorOrganici, 2, 7, 6).
catalog(chimiaNemetalelor, 2, 6, 6).
catalog(fizicaCuantica, 2, 3, 6).
catalog(termodinamicaChimica, 2, 4, 6).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
catalog(fiziologie, 3, 7, 1).
catalog(biochimie, 3, 4, 1).
catalog(stiinteleComportamentului, 3, 6, 1).
catalog(anatomie, 3, 5, 1).
catalog(primAjutor, 3, 5, 1).

catalog(fiziologie, 3, 5, 2).
catalog(biochimie, 3, 8, 2).
catalog(stiinteleComportamentului, 3, 7, 2).
catalog(anatomie, 3, 6, 2).
catalog(primAjutor, 3, 7, 2).

catalog(fiziologie, 3, 6, 3).
catalog(biochimie, 3, 9, 3).
catalog(stiinteleComportamentului, 3, 8, 3).
catalog(anatomie, 3, 7, 3).
catalog(primAjutor, 3, 6, 3).

catalog(fiziologie, 3, 7, 4).
catalog(biochimie, 3, 8, 4).
catalog(stiinteleComportamentului, 3, 6, 4).
catalog(anatomie, 3, 8, 4).
catalog(primAjutor, 3, 7, 4).

catalog(fiziologie, 3, 7, 5).
catalog(biochimie, 3, 5, 5).
catalog(stiinteleComportamentului, 3, 7, 5).
catalog(anatomie, 3, 7, 5).
catalog(primAjutor, 3, 6, 5).

catalog(fiziologie, 3, 9, 6).
catalog(biochimie, 3, 8, 6).
catalog(stiinteleComportamentului, 3, 6, 6).
catalog(anatomie, 3, 4, 6).
catalog(primAjutor, 3, 6, 6).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
catalog(lbFormAutomate, 4, 4, 1).
catalog(poo, 4, 5, 1).
catalog(algGrafuri, 4, 7, 1).
catalog(algebra, 4, 5, 1).
catalog(geometrie, 4, 9, 1).

catalog(lbFormAutomate, 4, 8, 2).
catalog(poo, 4, 6, 2).
catalog(algGrafuri, 4, 8, 2).
catalog(algebra, 4, 8, 2).
catalog(geometrie, 4, 7, 2).

catalog(lbFormAutomate, 4, 6, 3).
catalog(poo, 4, 5, 3).
catalog(algGrafuri, 4, 8, 3).
catalog(algebra, 4, 9, 3).
catalog(geometrie, 4, 7, 3).

catalog(lbFormAutomate, 4, 9, 4).
catalog(poo, 4, 8, 4).
catalog(algGrafuri, 4, 8, 4).
catalog(algebra, 4, 7, 4).
catalog(geometrie, 4, 7, 4).

catalog(lbFormAutomate, 4, 7, 5).
catalog(poo, 4, 10, 5).
catalog(algGrafuri, 4, 9, 5).
catalog(algebra, 4, 8, 5).
catalog(geometrie, 4, 7, 5).

catalog(lbFormAutomate, 4, 10, 6).
catalog(poo, 4, 10, 6).
catalog(algGrafuri, 4, 10, 6).
catalog(algebra, 4, 9, 6).
catalog(geometrie, 4, 9, 6).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%1. media notelor unui student dat
sumaLista([],0,0).
sumaLista([H|T],Suma,Nr) :- sumaLista(T,S2,Nr2), Suma is S2+ H,Nr is Nr2 + 1.

mediaNotelorUnuiStudent(Nume,Prenume,Media) :- studenti(Nume,Prenume, IdFacultate, IdStudent), findall(Nota, catalog(_, IdFacultate, Nota, IdStudent), ListaNote),sumaLista(ListaNote,Suma,Nr), Media is (Suma / Nr).

%2. media notelor de la o anumita materie
mediaNotelorMaterie(Materie,Media) :- findall(Nota, catalog(Materie, _, Nota, _), ListaNote), sumaLista(ListaNote,Suma,Nr), Media is (Suma / Nr).

%3. media notelor pentru o facultate
mediaNotelorFacultate(Facultate,Media) :- facultati(Facultate,IdFacultate), findall(Nota, catalog(_, IdFacultate, Nota, _), ListaNote), sumaLista(ListaNote,Suma,Nr), Media is (Suma / Nr).

%4						   	   
%maximul e ultimul element
maxim([X], X).
maxim([_|T], X) :- maxim(T, X).
facultateaCuCeaMaiMareMedie(Facultate) :- setof(Medii/IdFacultate, mediaNotelorFacultate(IdFacultate,Medii),ListaMedii), 
maxim(ListaMedii,_/Id),facultati(Facultate,Id).

% 5
studentulCuCeaMaiMareNotaLaOMaterie(StudentNume,StudentPrenume,Materie, MaximNota) :- setof(Nota/Id,catalog(Materie, _, Nota, Id),ListaStudenti), 
maxim(ListaStudenti,MaximNota/Id),studenti(StudentNume,StudentPrenume,_,Id).

% 6
take(Src,N,L) :- findall(E, (nth1(I,Src,E), I =< N), L).
afis([]).
afis([H1/H2|T]):-write(H1),write(' '),write(H2),nl,afis(T).
topNStudenti(N, Materie) :- setof(StudentNume/StudentPrenume, studentulCuCeaMaiMareNotaLaOMaterie(StudentNume,StudentPrenume,Materie,_),Lista), take(Lista,N,L),afis(L).

% 7 -- afisati pe rand cate o materie si studentii restantieri la acea materie
afis2([]).
afis2([H1/H2/H3|T]):-write(H1),write(' '),write(H2),write(' '),write(H3),nl,afis(T).
restantieri(Facultate) :- facultati(Facultate,IdF), findall(Materie/Nume/Prenume,(catalog(Materie, IdF, Nota, IdS),Nota < 5,studenti(Nume,Prenume,IdF,IdS)),Lista), afis2(Lista).
